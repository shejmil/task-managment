<div class="container mx-auto p-4">
  <div class="flex justify-between items-center mb-6">
    <h1 class="text-2xl font-bold">Tasks</h1>
    <button
      class="bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600 transition-colors"
      (click)="openAddTaskDialog()"
    >
      Add Task
    </button>
  </div>

  <div class="grid gap-4">
    <div
      *ngFor="let task of tasks"
      class="p-4 border rounded shadow-sm hover:shadow-md transition-shadow"
      [ngClass]="{
        'border-yellow-400': task.status === 'Pending',
        'border-blue-400': task.status === 'In Progress',
        'border-green-400': task.status === 'Completed'
      }"
    >
      <div class="flex justify-between items-start">
        <h2 class="text-xl font-semibold">{{ task.title }}</h2>
        <span
          class="px-2 py-1 rounded text-sm"
          [ngClass]="{
            'bg-yellow-100 text-yellow-800': task.status === 'Pending',
            'bg-blue-100 text-blue-800': task.status === 'In Progress',
            'bg-green-100 text-green-800': task.status === 'Completed'
          }"
        >
          {{ task.status }}
        </span>
      </div>

      <p class="mt-2 text-gray-600">
        {{ task.description | slice:0:100 }}...
      </p>

      <div class="flex justify-between items-center mt-4">
        <span class="text-sm text-gray-500">
          Due: {{ task.deadline | date }}
        </span>
        <div class="space-x-2">
          <button
            class="text-blue-500 hover:text-blue-700"
            (click)="openEditTaskDialog(task)"
          >
            Edit
          </button>
          <button
            class="text-blue-500 hover:text-blue-700"
            [routerLink]="['/tasks', task.id]"
          >
            View Details
          </button>
          <button
            class="text-red-500 hover:text-red-700"
            (click)="deleteTask(task.id)"
          >
            Delete
          </button>
        </div>
      </div>
    </div>
  </div>

  <app-task-dialog
    *ngIf="showDialog"
    [task]="selectedTask"
    (save)="onSaveTask($event)"
    (cancel)="closeDialog()"
  ></app-task-dialog>
</div>