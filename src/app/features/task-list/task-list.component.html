<div class="container py-4">
  <div class="d-flex justify-content-between align-items-center mb-4 p-4 rounded-xxl shadow-soft" style="background: linear-gradient(135deg, rgba(255,255,255,0.95) 0%, rgba(255,255,255,0.85) 100%); backdrop-filter: blur(20px); border: 1px solid rgba(99,102,241,.1);">
    <div>
      <h1 class="display-6 fw-bold mb-2" style="background: linear-gradient(135deg, var(--accent) 0%, var(--accent-purple) 100%); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text;">Task Manager</h1>
      <p class="text-secondary mb-0">Manage your tasks efficiently</p>
    </div>
    <button
      class="btn btn-accent d-flex align-items-center gap-2 hover-lift px-4"
      (click)="openAddTaskDialog()"
      style="box-shadow: 0 4px 16px rgba(99,102,241,.3); background: linear-gradient(135deg, var(--accent) 0%, var(--accent-purple) 100%); border: none;"
    >
      <span class="material-icons">add_circle</span>
      Add Task
    </button>
  </div>

  <div class="row g-4">
    <div
      *ngFor="let task of tasks"
      class="col-12"
    >
      <div class="card border-0 shadow-soft hover-lift rounded-xl border-start border-5"
        [ngClass]="{
          'border-warning': task.status === 'Pending',
          'border-info': task.status === 'In Progress',
          'border-success': task.status === 'Completed'
        }"
      >
        <div class="card-body">
          <div class="d-flex justify-content-between align-items-start mb-3">
            <div class="flex-grow-1 me-3">
              <h2 class="h5 fw-semibold mb-2">{{ task.title }}</h2>
              <div class="d-flex align-items-center gap-2 mb-2 flex-wrap">
                <span *ngIf="task.category" class="badge rounded-pill px-3 py-1 me-1"
                  [ngClass]="{
                    'accent-purple text-white': task.category === 'Development',
                    'accent-pink text-white': task.category === 'Design',
                    'accent-teal text-white': task.category === 'DevOps',
                    'accent-orange text-white': task.category === 'Documentation'
                  }">
                  {{ task.category }}
                </span>
                <span class="badge rounded-pill px-3 py-1"
                  [ngClass]="{
                    'bg-warning text-warning-emphasis': task.status === 'Pending',
                    'bg-info text-info-emphasis': task.status === 'In Progress',
                    'bg-success text-success-emphasis': task.status === 'Completed'
                  }"
                >{{ task.status }}</span>
                <ng-container *ngIf="task.assignees">
                  <span *ngFor="let user of task.assignees" class="avatar-chip rounded-circle bg-accent text-white fw-bold ms-1" style="width:28px;height:28px;display:inline-flex;align-items:center;justify-content:center;font-size:0.95rem;">{{ user[0] }}</span>
                </ng-container>
              </div>
              <div class="text-secondary mb-2" [innerHTML]="task.description | slice:0:180"></div>
              <div class="progress-pill mb-2"><span [style.width]="task.progress ? task.progress + '%' : '33%'"></span></div>
            </div>
          </div>

          <div class="d-flex justify-content-between align-items-center mt-4 pt-3 border-top">
            <div class="d-flex align-items-center text-secondary">
              <span class="material-icons me-2">event</span>
              <small>
                Due: {{ task.deadline | date:'MMM d, y' }}
              </small>
            </div>
            <div class="d-flex gap-2 ">
              <button
                class="btn btn-light rounded-pill d-inline-flex align-items-center px-3 py-2 hover-lift"
                style="border: 1px solid rgba(99,102,241,.15); box-shadow: 0 2px 8px rgba(99,102,241,.1);"
                [routerLink]="['/tasks', task.id]"
              >
                <span class="material-icons fs-5 me-1">visibility</span>
                <span class="fw-medium">Details</span>
              </button>
              
              <button
                class="btn btn-light rounded-pill d-inline-flex align-items-center px-3 py-2 hover-lift"
                style="border: 1px solid rgba(99,102,241,.15); box-shadow: 0 2px 8px rgba(99,102,241,.1);"
                (click)="openEditTaskDialog(task)"
              >
                <span class="material-icons fs-5 me-1">edit</span>
                <span class="fw-medium">Edit</span>
              </button>

              <button
                class="btn btn-danger rounded-pill d-inline-flex align-items-center px-3 py-2 hover-lift"
                style="box-shadow: 0 2px 8px rgba(220,53,69,.2);"
                (click)="deleteTask(task.id)"
              >
                <span class="material-icons fs-5 me-1">delete</span>
                <span class="fw-medium">Delete</span>
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>
    </div>

  <app-task-dialog
    *ngIf="showDialog && selectedTask"
    [task]="selectedTask"
    (save)="onSaveTask($event)"
    (cancel)="closeDialog()"
  ></app-task-dialog>
